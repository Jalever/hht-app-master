{"remainingRequest":"/Users/wangjian/Desktop/hht/hht-app-master/node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!/Users/wangjian/Desktop/hht/hht-app-master/src/components/Suspend.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjian/Desktop/hht/hht-app-master/src/components/Suspend.vue","mtime":1588846658831},{"path":"/Users/wangjian/Desktop/hht/hht-app-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjian/Desktop/hht/hht-app-master/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangjian/Desktop/hht/hht-app-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjian/Desktop/hht/hht-app-master/node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\tdefault: '../assets/image/logo@3x.png'\n\t\t},\n\t\titemWidth: {\n\t\t\ttype: Number,\n\t\t\tdefault: 40\n\t\t},\n\t\titemHeight: {\n\t\t\ttype: Number,\n\t\t\tdefault: 40\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\tstartToMove: false,\n\t\t\tisShow: false,\n\t\t\ttimer: null,\n\t\t\tcurrentTop: null,\n\t\t\tlist: [],\n\t\t\tclientW: document.documentElement.clientWidth, //视口宽\n\t\t\tclientH: document.documentElement.clientHeight //视口高\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.getSpend();\n\t\tthis.left = this.clientW - this.itemWidth - 10;\n\t\tthis.top = this.clientH / 2 - this.itemHeight / 2 + 150;\n\t},\n\tmounted() {\n\t\tthis.bindScrollEvent();\n\t},\n\tbeforeDestroy() {\n\t\t// 记得销毁一些全局的的事件\n\t\tthis.removeScrollEvent();\n\t},\n\tmethods: {\n\t\tgetSpend() {\n\t\t\tthis.$axios\n\t\t\t\t.getSuspend()\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.data.code == 1 && res.data.data.pics != '' && res.data.data.referModel == 103 &&  res.data.data.visibleObject == 20 &&  res.data.data.referValue == 1) {\n\t\t\t\t\t\tthis.list = res.data.data;\n\t\t\t\t\t\tthis.isShow = true;\n\t\t\t\t\t\tconsole.log(\"111\")\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"222\")\n\t\t\t\t\t\tthis.isShow = false;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {});\n\t\t},\n\t\tsuspendClcik(url) {\n\t\t\twindow.location.href = url;\n\t\t},\n\t\thandleTouchStart() {\n\t\t\tthis.startToMove = true;\n\t\t\tthis.$refs.dragIcon.style.transition = 'none';\n\t\t},\n\t\thandleTouchMove(e) {\n\t\t\tconst clientX = e.targetTouches[0].clientX; //手指相对视口的x\n\t\t\tconst clientY = e.targetTouches[0].clientY; //手指相对视口的y\n\t\t\tconst isInScreen = clientX <= this.clientW && clientX >= 0 && clientY <= this.clientH && clientY >= 0;\n\t\t\tif (this.startToMove && e.targetTouches.length === 1) {\n\t\t\t\tif (isInScreen) {\n\t\t\t\t\tthis.left = clientX - this.itemWidth / 2;\n\t\t\t\t\tthis.top = clientY - this.itemHeight / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thandleTouchEnd() {\n\t\t\tconsole.log('yidong');\n\t\t\tif (this.left < this.clientW / 2) {\n\t\t\t\tthis.left = 10; //不让贴边 所以设置30没设置0\n\t\t\t\tthis.handleIconY();\n\t\t\t} else {\n\t\t\t\tthis.left = this.clientW - this.itemWidth - 10; //不让贴边 所以减30\n\t\t\t\tthis.handleIconY();\n\t\t\t}\n\t\t\tthis.$refs.dragIcon.style.transition = 'all .3s';\n\t\t},\n\t\thandleIconY() {\n\t\t\tif (this.top < 0) {\n\t\t\t\tthis.top = 10; //不上帖上边所以设置为30 没设置0\n\t\t\t} else if (this.top + this.itemHeight > this.clientH) {\n\t\t\t\tthis.top = this.clientH - this.itemHeight - 10; //不让帖下边所以减30\n\t\t\t}\n\t\t},\n\t\tbindScrollEvent() {\n\t\t\twindow.addEventListener('scroll', this.handleScrollStart);\n\t\t},\n\t\tremoveScrollEvent() {\n\t\t\twindow.removeEventListener('scroll', this.handleScrollStart);\n\t\t},\n\t\thandleScrollStart() {\n\t\t\t// this.isShow = false;\n\t\t\tthis.timer && clearTimeout(this.timer);\n\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\tthis.handleScrollEnd();\n\t\t\t}, 300);\n\t\t\tthis.currentTop = document.documentElement.scrollTop || document.body.scrollTop;\n\t\t},\n\t\thandleScrollEnd() {\n\t\t\tthis.scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n\t\t\t// 判断是否停止滚动的条件\n\t\t\tif (this.scrollTop == this.currentTop) {\n\t\t\t\t// this.isShow = true;\n\t\t\t}\n\t\t}\n\t}\n};\n",{"version":3,"sources":["Suspend.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Suspend.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\t<transition>\n\t\t<div\n\t\t\tref=\"dragIcon\"\n\t\t\tclass=\"dragIcon\"\n\t\t\t@touchstart.stop=\"handleTouchStart\"\n\t\t\t@touchmove.prevent.stop=\"handleTouchMove($event)\"\n\t\t\t@touchend.stop=\"handleTouchEnd\"\n\t\t\t:style=\"{ left: left + 'px', top: top + 'px', width: itemWidth + 'px', height: itemHeight + 'px' }\"\n\t\t\tv-if=\"isShow\"\n\t\t\t@click=\"suspendClcik(list.links)\"\n\t\t>\n\t\t\t<img :src=\"list.pics\" alt=\"\" />\n\t\t</div>\n\t</transition>\n</template>\n\n<script>\nexport default {\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\tdefault: '../assets/image/logo@3x.png'\n\t\t},\n\t\titemWidth: {\n\t\t\ttype: Number,\n\t\t\tdefault: 40\n\t\t},\n\t\titemHeight: {\n\t\t\ttype: Number,\n\t\t\tdefault: 40\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\tstartToMove: false,\n\t\t\tisShow: false,\n\t\t\ttimer: null,\n\t\t\tcurrentTop: null,\n\t\t\tlist: [],\n\t\t\tclientW: document.documentElement.clientWidth, //视口宽\n\t\t\tclientH: document.documentElement.clientHeight //视口高\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.getSpend();\n\t\tthis.left = this.clientW - this.itemWidth - 10;\n\t\tthis.top = this.clientH / 2 - this.itemHeight / 2 + 150;\n\t},\n\tmounted() {\n\t\tthis.bindScrollEvent();\n\t},\n\tbeforeDestroy() {\n\t\t// 记得销毁一些全局的的事件\n\t\tthis.removeScrollEvent();\n\t},\n\tmethods: {\n\t\tgetSpend() {\n\t\t\tthis.$axios\n\t\t\t\t.getSuspend()\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.data.code == 1 && res.data.data.pics != '' && res.data.data.referModel == 103 &&  res.data.data.visibleObject == 20 &&  res.data.data.referValue == 1) {\n\t\t\t\t\t\tthis.list = res.data.data;\n\t\t\t\t\t\tthis.isShow = true;\n\t\t\t\t\t\tconsole.log(\"111\")\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"222\")\n\t\t\t\t\t\tthis.isShow = false;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {});\n\t\t},\n\t\tsuspendClcik(url) {\n\t\t\twindow.location.href = url;\n\t\t},\n\t\thandleTouchStart() {\n\t\t\tthis.startToMove = true;\n\t\t\tthis.$refs.dragIcon.style.transition = 'none';\n\t\t},\n\t\thandleTouchMove(e) {\n\t\t\tconst clientX = e.targetTouches[0].clientX; //手指相对视口的x\n\t\t\tconst clientY = e.targetTouches[0].clientY; //手指相对视口的y\n\t\t\tconst isInScreen = clientX <= this.clientW && clientX >= 0 && clientY <= this.clientH && clientY >= 0;\n\t\t\tif (this.startToMove && e.targetTouches.length === 1) {\n\t\t\t\tif (isInScreen) {\n\t\t\t\t\tthis.left = clientX - this.itemWidth / 2;\n\t\t\t\t\tthis.top = clientY - this.itemHeight / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thandleTouchEnd() {\n\t\t\tconsole.log('yidong');\n\t\t\tif (this.left < this.clientW / 2) {\n\t\t\t\tthis.left = 10; //不让贴边 所以设置30没设置0\n\t\t\t\tthis.handleIconY();\n\t\t\t} else {\n\t\t\t\tthis.left = this.clientW - this.itemWidth - 10; //不让贴边 所以减30\n\t\t\t\tthis.handleIconY();\n\t\t\t}\n\t\t\tthis.$refs.dragIcon.style.transition = 'all .3s';\n\t\t},\n\t\thandleIconY() {\n\t\t\tif (this.top < 0) {\n\t\t\t\tthis.top = 10; //不上帖上边所以设置为30 没设置0\n\t\t\t} else if (this.top + this.itemHeight > this.clientH) {\n\t\t\t\tthis.top = this.clientH - this.itemHeight - 10; //不让帖下边所以减30\n\t\t\t}\n\t\t},\n\t\tbindScrollEvent() {\n\t\t\twindow.addEventListener('scroll', this.handleScrollStart);\n\t\t},\n\t\tremoveScrollEvent() {\n\t\t\twindow.removeEventListener('scroll', this.handleScrollStart);\n\t\t},\n\t\thandleScrollStart() {\n\t\t\t// this.isShow = false;\n\t\t\tthis.timer && clearTimeout(this.timer);\n\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\tthis.handleScrollEnd();\n\t\t\t}, 300);\n\t\t\tthis.currentTop = document.documentElement.scrollTop || document.body.scrollTop;\n\t\t},\n\t\thandleScrollEnd() {\n\t\t\tthis.scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n\t\t\t// 判断是否停止滚动的条件\n\t\t\tif (this.scrollTop == this.currentTop) {\n\t\t\t\t// this.isShow = true;\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n\n<style scoped>\n.dragIcon {\n\tposition: fixed;\n\twidth: 40px;\n\theight: 40px;\n\tborder-radius: 50%;\n\ttext-align: center;\n\tcolor: #fff;\n\tbackground: #fff;\n}\n.dragIcon img {\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: block;\n\tborder-radius: 50%;\n}\n.v-enter {\n\topacity: 1;\n}\n.v-leave-to {\n\topacity: 0;\n}\n.v-enter-active,\n.v-leave-active {\n\ttransition: opacity 0.3s;\n}\n</style>\n"]}]}