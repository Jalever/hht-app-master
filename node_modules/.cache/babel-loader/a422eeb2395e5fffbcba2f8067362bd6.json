{"remainingRequest":"/Users/wangjian/Desktop/Desktop/hht/hht-app-master/node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!/Users/wangjian/Desktop/Desktop/hht/hht-app-master/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!/Users/wangjian/Desktop/Desktop/hht/hht-app-master/src/api/index.js","dependencies":[{"path":"/Users/wangjian/Desktop/Desktop/hht/hht-app-master/src/api/index.js","mtime":1588067930175},{"path":"/Users/wangjian/Desktop/Desktop/hht/hht-app-master/.babelrc","mtime":1585901407366},{"path":"/Users/wangjian/Desktop/Desktop/hht/hht-app-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjian/Desktop/Desktop/hht/hht-app-master/node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjian/Desktop/Desktop/hht/hht-app-master/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from \"axios\";\nimport qs from \"qs\";\nimport Router from '@/router/index';\n\nvar AUTH_TOKEN = function () {\n  return localStorage.getItem(\"token\");\n}(); //渠道id\n\n\nvar USER = function () {\n  return localStorage.getItem(\"user\");\n}();\n\nvar CLId = function () {\n  return 65;\n}();\n\nvar babyId = function () {\n  return localStorage.getItem(\"babyId\");\n}(); //课程id\n\n\nvar CID = function () {\n  console.log(\"Cid1111\", localStorage.getItem(\"cid\"));\n  return localStorage.getItem(\"cid\");\n}();\n\nexport function fetch(options) {\n  return new Promise(function (resolve, reject) {\n    var instance = axios.create({\n      //instance创建一个axios实例，可以自定义配置，可在 axios文档中查看详情\n      //所有的请求都会带上这些配置，比如全局都要用的身份信息等。\n      headers: {\n        \"Content-Type\": \"application/json\" // 'token':\"eyJ0eXBlIjoiSldUIiwiYWxnIjoiSFMyNTYifQ.eyJleHAiOjE1ODc0OTA5NTcsIm5iZiI6MTU4Mzg5MDk1N30.4uO3puLj52psZgbfTQgNPkeqzk_pn9-M2-eziyx1WhU\",//token从全局变量那里传过来\n\n      },\n      timeout: 30 * 1000 // 30秒超时\n\n    });\n    instance.defaults.headers.common[\"token\"] = AUTH_TOKEN;\n    instance.interceptors.request.use(function (config) {\n      // console.log(\"AUTH_TOKEN\")\n      if (AUTH_TOKEN == null) {\n        var promisefresh = new Promise(function (resolve, reject) {\n          //刷新token\n          axios.get(\"http://api.cloud.alilo.com.cn/api/v4/login/get-token?appKey=hht&appSecret=hht\").then(function (response) {\n            config.headers.token = response.data.data;\n            localStorage.setItem('token', response.data.data);\n            resolve(config);\n          });\n        });\n        return promisefresh;\n      }\n\n      var url = config.url;\n\n      if (url.indexOf(\"login\") > -1) {\n        localStorage.setItem('token', \"\");\n        config.headers.token = \"\";\n      }\n\n      if (url.indexOf(\"user\") > -1 && url.indexOf(\"login\") < 0) {\n        config.headers.token = localStorage.getItem(\"token\");\n      }\n\n      return config;\n    }, function (err) {\n      return Promise.reject(err);\n    });\n    instance.interceptors.response.use(function (res) {\n      // console.log(res)\n      if (res.data.code == 2) {\n        // console.log(\"token过期了\", Router);\n        Router.push({\n          name: 'login'\n        });\n      }\n\n      return res;\n    }, function (err) {\n      return err;\n    });\n    instance(options).then(function (response) {\n      //then 请求成功之后进行什么操作\n      resolve(response); //把请求到的数据发到引用请求的地方\n    })[\"catch\"](function (error) {\n      // console.log(\"请求异常信息：\" + error);\n      reject(error);\n    });\n  });\n}\nvar cloudUrl = \"https://cloud.alilo.com.cn/baby/api/wx/\";\nvar aliloUrl = \"http://api.tcloud.alilo.com.cn/api/v4/\"; // const aliloUrl = \"http://hhtv3.api.zhishangsoft.com/api/v4/\"\n//banner轮播图\n\nexport default {\n  /**\r\n   * 获取学习报告\r\n   */\n  getUserReport: function getUserReport(month) {\n    return fetch({\n      url: aliloUrl + \"course/study-report\",\n      method: \"post\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        courseId: CID,\n        month: month\n      }\n    });\n  },\n\n  /**\r\n   * 获取用户token\r\n   * */\n  userLogin: function userLogin() {\n    return fetch({\n      url: \"http://api.cloud.alilo.com.cn/api/v4/login/get-token\",\n      method: \"get\",\n      params: {\n        appKey: \"hht\",\n        appSecret: \"hht\"\n      }\n    });\n  },\n\n  /*\r\n   *累计学习时长\r\n   */\n  sumTime: function sumTime(month) {\n    return fetch({\n      url: aliloUrl + \"course/study-total-time\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        courseId: CID,\n        month: month\n      }\n    });\n  },\n\n  /**\r\n   * 排行榜\r\n   * */\n  getBabyRanking: function getBabyRanking(mouth) {\n    return fetch({\n      url: aliloUrl + \"course/get-top\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        courseId: CID,\n        currentDate: mouth,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 会员专属内容\r\n   * */\n  getVipContent: function getVipContent(page) {\n    return fetch({\n      url: aliloUrl + \"audio-group/search-vip\",\n      method: \"POST\",\n      params: {\n        channelId: CLId,\n        pageNo: page,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 会员专属活动\r\n   * */\n  getVipActivity: function getVipActivity() {\n    return fetch({\n      url: aliloUrl + \"vip-activity/search\",\n      method: \"POST\",\n      params: {\n        channelId: CLId,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 会员卡激活\r\n   * */\n  setVipClubCard: function setVipClubCard(code) {\n    return fetch({\n      url: aliloUrl + \"activation-code/activate\",\n      method: \"POST\",\n      params: {\n        activationCode: code,\n        userId: USER || localStorage.getItem(\"user\"),\n        channelId: CLId,\n        devid: 111\n      }\n    });\n  },\n\n  /**\r\n   * 会员用户信息\r\n   * */\n  getUserInfo: function getUserInfo() {\n    return fetch({\n      url: aliloUrl + \"member-card/get\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        channelId: CLId\n      }\n    });\n  },\n\n  /**\r\n   * 会员帮助\r\n   * */\n  getUserHelp: function getUserHelp() {\n    return fetch({\n      url: aliloUrl + \"member-help/search\",\n      method: \"POST\",\n      params: {\n        channelId: CLId,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 权益介绍\r\n   */\n  getVipEquity: function getVipEquity(id) {\n    return fetch({\n      url: aliloUrl + \"member-rights/search\",\n      method: \"POST\",\n      params: {\n        channelId: CLId,\n        userId: USER || localStorage.getItem(\"user\"),\n        cardId: id,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 获取宝宝打卡信息\r\n   * */\n  getBabyClock: function getBabyClock(month) {\n    return fetch({\n      url: aliloUrl + \"course/punch-in-list\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        courseId: CID,\n        month: month\n      }\n    });\n  },\n\n  /*\r\n   * 每日课程\r\n   * */\n  getDayCourse: function getDayCourse(time) {\n    return fetch({\n      url: aliloUrl + \"course/today-course-data\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        courseId: CID,\n        currentDate: time\n      }\n    });\n  },\n\n  /**\r\n   * 课程关键字\r\n   */\n  getDayKey: function getDayKey(time) {\n    return fetch({\n      url: aliloUrl + \"course/today-key\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        courseId: CID,\n        currentDate: time\n      }\n    });\n  },\n\n  /**\r\n   * 宝宝关键期\r\n   */\n  getBabyPeriod: function getBabyPeriod() {\n    return fetch({\n      url: aliloUrl + \"course/get-critical-period\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\")\n      }\n    });\n  },\n\n  /*\r\n   * 查询会员卡\r\n   */\n  getMemberCard: function getMemberCard() {\n    return fetch({\n      url: aliloUrl + \"member-card/search\",\n      method: \"POST\",\n      params: {\n        channelId: CLId,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /*\r\n   * 报名\r\n   */\n  userApply: function userApply() {\n    return fetch({\n      url: aliloUrl + \"course/apply\",\n      method: \"POST\",\n      params: {\n        courseId: CID,\n        userId: USER || localStorage.getItem(\"user\"),\n        babyId: babyId\n      }\n    });\n  },\n\n  /*\r\n   * 获取报名时间\r\n   */\n  userApplyTime: function userApplyTime() {\n    return fetch({\n      url: aliloUrl + \"course/apply-time\",\n      method: \"POST\",\n      params: {\n        courseId: CID,\n        userId: USER || localStorage.getItem(\"user\")\n      }\n    });\n  },\n\n  /*\r\n   * 获取课程id\r\n   */\n  userActivityInfo: function userActivityInfo() {\n    return fetch({\n      url: aliloUrl + \"course/get-introduce\",\n      method: \"POST\",\n      params: {\n        channelId: CLId\n      }\n    });\n  },\n\n  /*\r\n   *获取悬浮\r\n   */\n  getSuspend: function getSuspend() {\n    return fetch({\n      url: aliloUrl + \"switch-set/get\",\n      method: \"POST\",\n      params: {\n        channelId: CLId,\n        userId: USER || localStorage.getItem(\"user\")\n      }\n    });\n  },\n  getBabyList: function getBabyList() {\n    return fetch({\n      url: aliloUrl + \"user/baby/query\",\n      method: \"GET\",\n      params: {\n        userId: 3583298\n      }\n    });\n  }\n};",null]}