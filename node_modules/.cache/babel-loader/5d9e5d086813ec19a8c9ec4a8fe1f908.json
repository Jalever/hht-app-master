{"remainingRequest":"/Users/wangjian/Desktop/Desktop/hht/hht-app-master/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!/Users/wangjian/Desktop/Desktop/hht/hht-app-master/src/api/index.js","dependencies":[{"path":"/Users/wangjian/Desktop/Desktop/hht/hht-app-master/src/api/index.js","mtime":1588120341453},{"path":"/Users/wangjian/Desktop/Desktop/hht/hht-app-master/.babelrc","mtime":1585901407366},{"path":"/Users/wangjian/Desktop/Desktop/hht/hht-app-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjian/Desktop/Desktop/hht/hht-app-master/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from \"axios\";\nimport qs from \"qs\";\nimport Router from '@/router/index';\n\nvar AUTH_TOKEN = function () {\n  return localStorage.getItem(\"token\");\n}(); //渠道id\n\n\nvar USER = function () {\n  return localStorage.getItem(\"user\");\n}();\n\nvar CLId = function () {\n  return 65;\n}();\n\nvar babyId = function () {\n  return localStorage.getItem(\"babyId\");\n}(); //课程id\n\n\nvar CID = function () {\n  console.log(\"Cid1111\", localStorage.getItem(\"cid\"));\n  return localStorage.getItem(\"cid\");\n}();\n\nexport function fetch(options) {\n  return new Promise(function (resolve, reject) {\n    var instance = axios.create({\n      //instance创建一个axios实例，可以自定义配置，可在 axios文档中查看详情\n      //所有的请求都会带上这些配置，比如全局都要用的身份信息等。\n      headers: {\n        \"Content-Type\": \"application/json\" // 'token':\"eyJ0eXBlIjoiSldUIiwiYWxnIjoiSFMyNTYifQ.eyJleHAiOjE1ODc0OTA5NTcsIm5iZiI6MTU4Mzg5MDk1N30.4uO3puLj52psZgbfTQgNPkeqzk_pn9-M2-eziyx1WhU\",//token从全局变量那里传过来\n\n      },\n      timeout: 30 * 1000 // 30秒超时\n\n    });\n    instance.defaults.headers.common[\"token\"] = AUTH_TOKEN;\n    instance.interceptors.request.use(function (config) {\n      // console.log(\"AUTH_TOKEN\")\n      if (AUTH_TOKEN == null) {\n        var promisefresh = new Promise(function (resolve, reject) {\n          //刷新token\n          axios.get(\"http://api.cloud.alilo.com.cn/api/v4/login/get-token?appKey=hht&appSecret=hht\").then(function (response) {\n            config.headers.token = response.data.data;\n            localStorage.setItem('token', response.data.data);\n            resolve(config);\n          });\n        });\n        return promisefresh;\n      }\n\n      var url = config.url;\n\n      if (url.indexOf(\"login\") > -1) {\n        localStorage.setItem('token', \"\");\n        config.headers.token = \"\";\n      }\n\n      if (url.indexOf(\"user\") > -1 && url.indexOf(\"login\") < 0) {\n        config.headers.token = localStorage.getItem(\"token\");\n      }\n\n      return config;\n    }, function (err) {\n      return Promise.reject(err);\n    });\n    instance.interceptors.response.use(function (res) {\n      // console.log(res)\n      if (res.data.code == 2) {\n        // console.log(\"token过期了\", Router);\n        Router.push({\n          name: 'login'\n        });\n      }\n\n      return res;\n    }, function (err) {\n      return err;\n    });\n    instance(options).then(function (response) {\n      //then 请求成功之后进行什么操作\n      resolve(response); //把请求到的数据发到引用请求的地方\n    })[\"catch\"](function (error) {\n      // console.log(\"请求异常信息：\" + error);\n      reject(error);\n    });\n  });\n}\nvar cloudUrl = \"https://cloud.alilo.com.cn/baby/api/wx/\";\nvar aliloUrl = \"http://api.tcloud.alilo.com.cn/api/v4/\"; // const aliloUrl = \"http://hhtv3.api.zhishangsoft.com/api/v4/\"\n//banner轮播图\n\nexport default {\n  /**\r\n   * 获取学习报告\r\n   */\n  getUserReport: function getUserReport(month) {\n    return fetch({\n      url: aliloUrl + \"course/study-report\",\n      method: \"post\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        courseId: CID,\n        month: month\n      }\n    });\n  },\n\n  /**\r\n   * 获取用户token\r\n   * */\n  userLogin: function userLogin() {\n    return fetch({\n      url: \"http://api.cloud.alilo.com.cn/api/v4/login/get-token\",\n      method: \"get\",\n      params: {\n        appKey: \"hht\",\n        appSecret: \"hht\"\n      }\n    });\n  },\n\n  /*\r\n   *累计学习时长\r\n   */\n  sumTime: function sumTime(month) {\n    return fetch({\n      url: aliloUrl + \"course/study-total-time\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        courseId: CID,\n        month: month\n      }\n    });\n  },\n\n  /**\r\n   * 排行榜\r\n   * */\n  getBabyRanking: function getBabyRanking(mouth) {\n    return fetch({\n      url: aliloUrl + \"course/get-top\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        courseId: CID,\n        currentDate: mouth,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 会员专属内容\r\n   * */\n  getVipContent: function getVipContent(page) {\n    return fetch({\n      url: aliloUrl + \"audio-group/search-vip\",\n      method: \"POST\",\n      params: {\n        channelId: CLId,\n        pageNo: page,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 会员专属活动\r\n   * */\n  getVipActivity: function getVipActivity() {\n    return fetch({\n      url: aliloUrl + \"vip-activity/search\",\n      method: \"POST\",\n      params: {\n        channelId: CLId,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 会员卡激活\r\n   * */\n  setVipClubCard: function setVipClubCard(code) {\n    return fetch({\n      url: aliloUrl + \"activation-code/activate\",\n      method: \"POST\",\n      params: {\n        activationCode: code,\n        userId: USER || localStorage.getItem(\"user\"),\n        channelId: CLId,\n        devid: 111\n      }\n    });\n  },\n\n  /**\r\n   * 会员用户信息\r\n   * */\n  getUserInfo: function getUserInfo() {\n    return fetch({\n      url: aliloUrl + \"member-card/get\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        channelId: CLId\n      }\n    });\n  },\n\n  /**\r\n   * 会员帮助\r\n   * */\n  getUserHelp: function getUserHelp() {\n    return fetch({\n      url: aliloUrl + \"member-help/search\",\n      method: \"POST\",\n      params: {\n        channelId: CLId,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 权益介绍\r\n   */\n  getVipEquity: function getVipEquity(id) {\n    return fetch({\n      url: aliloUrl + \"member-rights/search\",\n      method: \"POST\",\n      params: {\n        channelId: CLId,\n        userId: USER || localStorage.getItem(\"user\"),\n        cardId: id,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 获取宝宝打卡信息\r\n   * */\n  getBabyClock: function getBabyClock(month) {\n    return fetch({\n      url: aliloUrl + \"course/punch-in-list\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        courseId: CID,\n        month: month\n      }\n    });\n  },\n\n  /*\r\n   * 每日课程\r\n   * */\n  getDayCourse: function getDayCourse(time) {\n    return fetch({\n      url: aliloUrl + \"course/today-course-data\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        courseId: CID,\n        currentDate: time\n      }\n    });\n  },\n\n  /**\r\n   * 课程关键字\r\n   */\n  getDayKey: function getDayKey(time) {\n    return fetch({\n      url: aliloUrl + \"course/today-key\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\"),\n        courseId: CID,\n        currentDate: time\n      }\n    });\n  },\n\n  /**\r\n   * 宝宝关键期\r\n   */\n  getBabyPeriod: function getBabyPeriod() {\n    return fetch({\n      url: aliloUrl + \"course/get-critical-period\",\n      method: \"POST\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\")\n      }\n    });\n  },\n\n  /*\r\n   * 查询会员卡\r\n   */\n  getMemberCard: function getMemberCard() {\n    return fetch({\n      url: aliloUrl + \"member-card/search\",\n      method: \"POST\",\n      params: {\n        channelId: CLId,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /*\r\n   * 报名\r\n   */\n  userApply: function userApply() {\n    return fetch({\n      url: aliloUrl + \"course/apply\",\n      method: \"POST\",\n      params: {\n        courseId: CID,\n        userId: USER || localStorage.getItem(\"user\"),\n        babyId: babyId\n      }\n    });\n  },\n\n  /*\r\n   * 获取报名时间\r\n   */\n  userApplyTime: function userApplyTime() {\n    return fetch({\n      url: aliloUrl + \"course/apply-time\",\n      method: \"POST\",\n      params: {\n        courseId: CID,\n        userId: USER || localStorage.getItem(\"user\")\n      }\n    });\n  },\n\n  /*\r\n   * 获取课程id\r\n   */\n  userActivityInfo: function userActivityInfo() {\n    return fetch({\n      url: aliloUrl + \"course/get-introduce\",\n      method: \"POST\",\n      params: {\n        channelId: CLId\n      }\n    });\n  },\n\n  /*\r\n   *获取悬浮\r\n   */\n  getSuspend: function getSuspend() {\n    return fetch({\n      url: aliloUrl + \"switch-set/get\",\n      method: \"POST\",\n      params: {\n        channelId: CLId,\n        userId: USER || localStorage.getItem(\"user\")\n      }\n    });\n  },\n  getBabyList: function getBabyList() {\n    return fetch({\n      url: aliloUrl + \"user/baby/query\",\n      method: \"GET\",\n      params: {\n        userId: USER || localStorage.getItem(\"user\")\n      }\n    });\n  }\n};",{"version":3,"sources":["/Users/wangjian/Desktop/Desktop/hht/hht-app-master/src/api/index.js"],"names":["axios","qs","Router","AUTH_TOKEN","localStorage","getItem","USER","CLId","babyId","CID","console","log","fetch","options","Promise","resolve","reject","instance","create","headers","timeout","defaults","common","interceptors","request","use","config","promisefresh","get","then","response","token","data","setItem","url","indexOf","err","res","code","push","name","error","cloudUrl","aliloUrl","getUserReport","month","method","params","userId","courseId","userLogin","appKey","appSecret","sumTime","getBabyRanking","mouth","currentDate","pageNo","pageSize","getVipContent","page","channelId","getVipActivity","setVipClubCard","activationCode","devid","getUserInfo","getUserHelp","getVipEquity","id","cardId","getBabyClock","getDayCourse","time","getDayKey","getBabyPeriod","getMemberCard","userApply","userApplyTime","userActivityInfo","getSuspend","getBabyList"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport qs from \"qs\";\r\nimport Router from '@/router/index';\r\nlet AUTH_TOKEN = (function() {\r\n\treturn localStorage.getItem(\"token\");\r\n})();\r\n//渠道id\r\nlet USER = (function() {\r\n\treturn localStorage.getItem(\"user\");\r\n})();\r\nlet CLId = (function() {\r\n\treturn 65;\r\n})();\nlet babyId = (function() {\r\n\treturn localStorage.getItem(\"babyId\");\r\n})();\r\n//课程id\r\nlet CID = (function() {\r\n\tconsole.log(\"Cid1111\", localStorage.getItem(\"cid\"))\r\n\treturn localStorage.getItem(\"cid\");\r\n})();\r\nexport function fetch(options) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst instance = axios.create({\r\n\t\t\t//instance创建一个axios实例，可以自定义配置，可在 axios文档中查看详情\r\n\t\t\t//所有的请求都会带上这些配置，比如全局都要用的身份信息等。\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t// 'token':\"eyJ0eXBlIjoiSldUIiwiYWxnIjoiSFMyNTYifQ.eyJleHAiOjE1ODc0OTA5NTcsIm5iZiI6MTU4Mzg5MDk1N30.4uO3puLj52psZgbfTQgNPkeqzk_pn9-M2-eziyx1WhU\",//token从全局变量那里传过来\r\n\t\t\t},\r\n\t\t\ttimeout: 30 * 1000 // 30秒超时\r\n\t\t});\r\n\t\tinstance.defaults.headers.common[\"token\"] = AUTH_TOKEN;\r\n\t\tinstance.interceptors.request.use(function(config) {\r\n\t\t\t// console.log(\"AUTH_TOKEN\")\r\n\t\t\tif (AUTH_TOKEN == null) {\r\n\t\t\t\tlet promisefresh = new Promise(function(resolve, reject) {\r\n\t\t\t\t\t//刷新token\r\n\t\t\t\t\taxios.get(\"http://api.cloud.alilo.com.cn/api/v4/login/get-token?appKey=hht&appSecret=hht\").then(response => {\r\n\t\t\t\t\t\tconfig.headers.token = response.data.data;\r\n\t\t\t\t\t\tlocalStorage.setItem('token', response.data.data);\r\n\t\t\t\t\t\tresolve(config);\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\treturn promisefresh;\r\n\t\t\t}\r\n\t\t\tlet url = config.url;\r\n\t\t\tif (url.indexOf(\"login\") > -1) {\r\n\t\t\t\tlocalStorage.setItem('token', \"\");\r\n\t\t\t\tconfig.headers.token = \"\";\r\n\t\t\t}\r\n\t\t\tif (url.indexOf(\"user\") > -1 && url.indexOf(\"login\") < 0) {\r\n\t\t\t\tconfig.headers.token = localStorage.getItem(\"token\");\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\t\t}, function(err) {\r\n\t\t\treturn Promise.reject(err);\r\n\t\t});\r\n\t\tinstance.interceptors.response.use(function(res) {\r\n\t\t\t// console.log(res)\r\n\t\t\tif (res.data.code == 2) {\r\n\t\t\t\t// console.log(\"token过期了\", Router);\r\n\t\t\t\tRouter.push({\r\n\t\t\t\t\tname: 'login'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}, function(err) {\r\n\t\t\treturn err;\r\n\t\t});\r\n\t\tinstance(options)\r\n\t\t\t.then(response => {\r\n\t\t\t\t//then 请求成功之后进行什么操作\r\n\t\t\t\tresolve(response); //把请求到的数据发到引用请求的地方\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\t// console.log(\"请求异常信息：\" + error);\r\n\t\t\t\treject(error);\r\n\t\t\t});\r\n\t});\r\n}\r\nconst cloudUrl = \"https://cloud.alilo.com.cn/baby/api/wx/\";\r\nconst aliloUrl = \"http://api.tcloud.alilo.com.cn/api/v4/\";\r\n// const aliloUrl = \"http://hhtv3.api.zhishangsoft.com/api/v4/\"\r\n//banner轮播图\r\nexport default {\r\n\t/**\r\n\t * 获取学习报告\r\n\t */\r\n\tgetUserReport(month) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/study-report\",\r\n\t\t\tmethod: \"post\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER || localStorage.getItem(\"user\"),\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tmonth: month\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 获取用户token\r\n\t * */\r\n\tuserLogin() {\r\n\t\treturn fetch({\r\n\t\t\turl: \"http://api.cloud.alilo.com.cn/api/v4/login/get-token\",\r\n\t\t\tmethod: \"get\",\r\n\t\t\tparams: {\r\n\t\t\t\tappKey: \"hht\",\r\n\t\t\t\tappSecret: \"hht\"\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/*\r\n\t *累计学习时长\r\n\t */\r\n\tsumTime(month) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/study-total-time\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER || localStorage.getItem(\"user\"),\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tmonth: month\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 排行榜\r\n\t * */\r\n\tgetBabyRanking(mouth) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/get-top\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER || localStorage.getItem(\"user\"),\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tcurrentDate: mouth,\r\n\t\t\t\tpageNo: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 会员专属内容\r\n\t * */\r\n\tgetVipContent(page) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"audio-group/search-vip\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tchannelId: CLId,\r\n\t\t\t\tpageNo: page,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 会员专属活动\r\n\t * */\r\n\tgetVipActivity() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"vip-activity/search\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tchannelId: CLId,\r\n\t\t\t\tpageNo: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 会员卡激活\r\n\t * */\r\n\tsetVipClubCard(code) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"activation-code/activate\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tactivationCode: code,\r\n\t\t\t\tuserId: USER || localStorage.getItem(\"user\"),\r\n\t\t\t\tchannelId: CLId,\r\n\t\t\t\tdevid: 111\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 会员用户信息\r\n\t * */\r\n\tgetUserInfo() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"member-card/get\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER || localStorage.getItem(\"user\"),\r\n\t\t\t\tchannelId: CLId\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 会员帮助\r\n\t * */\r\n\tgetUserHelp() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"member-help/search\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tchannelId: CLId,\r\n\t\t\t\tpageNo: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 权益介绍\r\n\t */\r\n\tgetVipEquity(id) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"member-rights/search\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tchannelId: CLId,\n\t\t\t\tuserId: USER || localStorage.getItem(\"user\"),\n\t\t\t\tcardId:id,\r\n\t\t\t\tpageNo: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 获取宝宝打卡信息\r\n\t * */\r\n\tgetBabyClock(month) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/punch-in-list\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER || localStorage.getItem(\"user\"),\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tmonth: month\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/*\r\n\t * 每日课程\r\n\t * */\r\n\tgetDayCourse(time) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/today-course-data\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER || localStorage.getItem(\"user\"),\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tcurrentDate: time\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 课程关键字\r\n\t */\r\n\tgetDayKey(time) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/today-key\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER || localStorage.getItem(\"user\"),\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tcurrentDate: time\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 宝宝关键期\r\n\t */\r\n\tgetBabyPeriod() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/get-critical-period\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER || localStorage.getItem(\"user\")\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/*\r\n\t * 查询会员卡\r\n\t */\r\n\tgetMemberCard() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"member-card/search\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tchannelId: CLId,\r\n\t\t\t\tpageNo: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/*\r\n\t * 报名\r\n\t */\r\n\tuserApply() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/apply\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tuserId: USER || localStorage.getItem(\"user\"),\n\t\t\t\tbabyId:babyId\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/*\r\n\t * 获取报名时间\r\n\t */\r\n\tuserApplyTime() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/apply-time\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tuserId: USER || localStorage.getItem(\"user\"),\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/*\r\n\t * 获取课程id\r\n\t */\r\n\tuserActivityInfo() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/get-introduce\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tchannelId: CLId,\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/*\r\n\t *获取悬浮\r\n\t */\r\n\tgetSuspend() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"switch-set/get\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tchannelId: CLId,\r\n\t\t\t\tuserId: USER || localStorage.getItem(\"user\"),\r\n\t\t\t}\r\n\t\t});\r\n\t},\n\tgetBabyList(){\n\t\treturn fetch({\n\t\t\turl: aliloUrl + \"user/baby/query\",\n\t\t\tmethod: \"GET\",\n\t\t\tparams: {\n\t\t\t\tuserId:USER || localStorage.getItem(\"user\")\n\t\t\t}\n\t\t});\n\t}\r\n};\n"]}]}