{"remainingRequest":"/Users/wangjian/Desktop/hht/hht-app-master/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!/Users/wangjian/Desktop/hht/hht-app-master/src/api/index.js","dependencies":[{"path":"/Users/wangjian/Desktop/hht/hht-app-master/src/api/index.js","mtime":1586509151846},{"path":"/Users/wangjian/Desktop/hht/hht-app-master/.babelrc","mtime":1585901407366},{"path":"/Users/wangjian/Desktop/hht/hht-app-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjian/Desktop/hht/hht-app-master/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from \"axios\";\nimport qs from \"qs\";\nimport Router from '@/router/index';\n\nvar AUTH_TOKEN = function () {\n  return localStorage.getItem(\"token\");\n}();\n\nvar USER = function () {\n  return localStorage.getItem(\"user\");\n}();\n\nvar CID = function () {\n  return 34;\n}();\n\nexport function fetch(options) {\n  return new Promise(function (resolve, reject) {\n    var instance = axios.create({\n      //instance创建一个axios实例，可以自定义配置，可在 axios文档中查看详情\n      //所有的请求都会带上这些配置，比如全局都要用的身份信息等。\n      headers: {\n        \"Content-Type\": \"application/json\" // 'token':\"eyJ0eXBlIjoiSldUIiwiYWxnIjoiSFMyNTYifQ.eyJleHAiOjE1ODc0OTA5NTcsIm5iZiI6MTU4Mzg5MDk1N30.4uO3puLj52psZgbfTQgNPkeqzk_pn9-M2-eziyx1WhU\",//token从全局变量那里传过来\n\n      },\n      timeout: 30 * 1000 // 30秒超时\n\n    });\n    instance.defaults.headers.common[\"token\"] = AUTH_TOKEN;\n    instance.interceptors.request.use(function (config) {\n      // console.log(\"AUTH_TOKEN\")\n      if (AUTH_TOKEN == null) {\n        var promisefresh = new Promise(function (resolve, reject) {\n          //刷新token\n          axios.get(\"http://api.cloud.alilo.com.cn/api/v4/login/get-token?appKey=hht&appSecret=hht\").then(function (response) {\n            config.headers.token = response.data.data;\n            localStorage.setItem('token', response.data.data);\n            resolve(config);\n          });\n        });\n        return promisefresh;\n      }\n\n      var url = config.url;\n\n      if (url.indexOf(\"login\") > -1) {\n        localStorage.setItem('token', \"\");\n        config.headers.token = \"\";\n      }\n\n      if (url.indexOf(\"user\") > -1 && url.indexOf(\"login\") < 0) {\n        config.headers.token = localStorage.getItem(\"token\");\n      }\n\n      return config;\n    }, function (err) {\n      return Promise.reject(err);\n    });\n    instance.interceptors.response.use(function (res) {\n      // console.log(res)\n      if (res.data.code == 2) {\n        // console.log(\"token过期了\", Router);\n        Router.push({\n          name: 'login'\n        });\n      }\n\n      return res;\n    }, function (err) {\n      return err;\n    });\n    instance(options).then(function (response) {\n      //then 请求成功之后进行什么操作\n      resolve(response); //把请求到的数据发到引用请求的地方\n    })[\"catch\"](function (error) {\n      // console.log(\"请求异常信息：\" + error);\n      reject(error);\n    });\n  });\n}\nvar cloudUrl = \"https://cloud.alilo.com.cn/baby/api/wx/\"; // const aliloUrl = \"http://api.tcloud.alilo.com.cn/api/v4/\";\n\nvar aliloUrl = \"http://hhtv3.api.zhishangsoft.com/api/v4/\"; //banner轮播图\n\nexport default {\n  /**\r\n   * 获取学习报告\r\n   */\n  getUserReport: function getUserReport(month) {\n    return fetch({\n      url: aliloUrl + \"course/study-report\",\n      method: \"post\",\n      params: {\n        userId: USER,\n        courseId: CID,\n        month: month\n      }\n    });\n  },\n\n  /**\r\n   * 获取用户token\r\n   * */\n  userLogin: function userLogin() {\n    return fetch({\n      url: \"http://api.cloud.alilo.com.cn/api/v4/login/get-token\",\n      method: \"get\",\n      params: {\n        appKey: \"hht\",\n        appSecret: \"hht\"\n      }\n    });\n  },\n\n  /*\r\n   *累计学习时长\r\n   */\n  sumTime: function sumTime(month) {\n    return fetch({\n      url: aliloUrl + \"course/study-total-time\",\n      method: \"POST\",\n      params: {\n        userId: USER,\n        courseId: CID,\n        month: month\n      }\n    });\n  },\n\n  /**\r\n   * 排行榜\r\n   * */\n  getBabyRanking: function getBabyRanking(mouth) {\n    return fetch({\n      url: aliloUrl + \"course/get-top\",\n      method: \"POST\",\n      params: {\n        userId: USER,\n        courseId: CID,\n        currentDate: mouth,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 会员专属内容\r\n   * */\n  getVipContent: function getVipContent() {\n    return fetch({\n      url: aliloUrl + \"audio-group/search-vip\",\n      method: \"POST\",\n      params: {\n        channelId: 65,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 会员专属活动\r\n   * */\n  getVipActivity: function getVipActivity() {\n    return fetch({\n      url: aliloUrl + \"vip-activity/search\",\n      method: \"POST\",\n      params: {\n        channelId: 65,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 会员卡激活\r\n   * */\n  setVipClubCard: function setVipClubCard(code) {\n    return fetch({\n      url: aliloUrl + \"activation-code/activate\",\n      method: \"POST\",\n      params: {\n        activationCode: code,\n        userId: USER,\n        channelId: 65,\n        devid: 111\n      }\n    });\n  },\n\n  /**\r\n   * 会员用户信息\r\n   * */\n  getUserInfo: function getUserInfo() {\n    return fetch({\n      url: aliloUrl + \"member-card/get\",\n      method: \"POST\",\n      params: {\n        userId: USER,\n        channelId: 34\n      }\n    });\n  },\n\n  /**\r\n   * 会员帮助\r\n   * */\n  getUserHelp: function getUserHelp() {\n    return fetch({\n      url: aliloUrl + \"member-help/search\",\n      method: \"POST\",\n      params: {\n        channelId: 65,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 权益介绍\r\n   */\n  getVipEquity: function getVipEquity() {\n    return fetch({\n      url: aliloUrl + \"member-rights/search\",\n      method: \"POST\",\n      params: {\n        channelId: 65,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /**\r\n   * 获取宝宝打卡信息\r\n   * */\n  getBabyClock: function getBabyClock(month) {\n    return fetch({\n      url: aliloUrl + \"course/punch-in-list\",\n      method: \"POST\",\n      params: {\n        userId: USER,\n        courseId: CID,\n        month: month\n      }\n    });\n  },\n\n  /*\r\n   * 每日课程\r\n   * */\n  getDayCourse: function getDayCourse() {\n    return fetch({\n      url: aliloUrl + \"course/today-course-data\",\n      method: \"POST\",\n      params: {\n        userId: USER,\n        courseId: CID,\n        currentDate: '2020-04-03'\n      }\n    });\n  },\n\n  /**\r\n   * 课程关键字\r\n   */\n  getDayKey: function getDayKey(time) {\n    return fetch({\n      url: aliloUrl + \"course/today-key\",\n      method: \"POST\",\n      params: {\n        userId: USER,\n        courseId: CID,\n        currentDate: time\n      }\n    });\n  },\n\n  /**\r\n   * 宝宝关键期\r\n   */\n  getBabyPeriod: function getBabyPeriod() {\n    return fetch({\n      url: aliloUrl + \"course/get-critical-period\",\n      method: \"POST\",\n      params: {\n        userId: USER\n      }\n    });\n  },\n\n  /*\r\n   * 查询会员卡\r\n   */\n  getMemberCard: function getMemberCard() {\n    return fetch({\n      url: aliloUrl + \"member-card/search\",\n      method: \"POST\",\n      params: {\n        channelId: 65,\n        pageNo: 1,\n        pageSize: 10\n      }\n    });\n  },\n\n  /*\n  * 报名\n  */\n  userApply: function userApply() {\n    return fetch({\n      url: aliloUrl + \"course/apply\",\n      method: \"POST\",\n      params: {\n        courseId: CID,\n        userId: USER\n      }\n    });\n  },\n\n  /*\n  * 获取报名时间\n  */\n  userApplyTime: function userApplyTime() {\n    return fetch({\n      url: aliloUrl + \"course/apply-time\",\n      method: \"POST\",\n      params: {\n        courseId: CID,\n        userId: USER\n      }\n    });\n  },\n\n  /*\n  * 获取报名时间\n  */\n  userActivityInfo: function userActivityInfo() {\n    return fetch({\n      url: aliloUrl + \"course/get-introduce\",\n      method: \"POST\",\n      params: {\n        courseId: CID\n      }\n    });\n  }\n};",{"version":3,"sources":["/Users/wangjian/Desktop/hht/hht-app-master/src/api/index.js"],"names":["axios","qs","Router","AUTH_TOKEN","localStorage","getItem","USER","CID","fetch","options","Promise","resolve","reject","instance","create","headers","timeout","defaults","common","interceptors","request","use","config","promisefresh","get","then","response","token","data","setItem","url","indexOf","err","res","code","push","name","error","cloudUrl","aliloUrl","getUserReport","month","method","params","userId","courseId","userLogin","appKey","appSecret","sumTime","getBabyRanking","mouth","currentDate","pageNo","pageSize","getVipContent","channelId","getVipActivity","setVipClubCard","activationCode","devid","getUserInfo","getUserHelp","getVipEquity","getBabyClock","getDayCourse","getDayKey","time","getBabyPeriod","getMemberCard","userApply","userApplyTime","userActivityInfo"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,OAAOC,MAAP,MAAmB,gBAAnB;;AACA,IAAIC,UAAU,GAAI,YAAW;AAC5B,SAAOC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAP;AACA,CAFgB,EAAjB;;AAGA,IAAIC,IAAI,GAAI,YAAW;AACtB,SAAOF,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAP;AACA,CAFU,EAAX;;AAGA,IAAIE,GAAG,GAAI,YAAW;AACrB,SAAO,EAAP;AACA,CAFS,EAAV;;AAGA,OAAO,SAASC,KAAT,CAAeC,OAAf,EAAwB;AAC9B,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,QAAMC,QAAQ,GAAGb,KAAK,CAACc,MAAN,CAAa;AAC7B;AACA;AACAC,MAAAA,OAAO,EAAE;AACR,wBAAgB,kBADR,CAER;;AAFQ,OAHoB;AAO7BC,MAAAA,OAAO,EAAE,KAAK,IAPe,CAOV;;AAPU,KAAb,CAAjB;AASAH,IAAAA,QAAQ,CAACI,QAAT,CAAkBF,OAAlB,CAA0BG,MAA1B,CAAiC,OAAjC,IAA4Cf,UAA5C;AACAU,IAAAA,QAAQ,CAACM,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAkC,UAASC,MAAT,EAAiB;AAClD;AACA,UAAInB,UAAU,IAAI,IAAlB,EAAwB;AACvB,YAAIoB,YAAY,GAAG,IAAIb,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AACxD;AACAZ,UAAAA,KAAK,CAACwB,GAAN,CAAU,+EAAV,EAA2FC,IAA3F,CAAgG,UAAAC,QAAQ,EAAI;AAC3GJ,YAAAA,MAAM,CAACP,OAAP,CAAeY,KAAf,GAAuBD,QAAQ,CAACE,IAAT,CAAcA,IAArC;AACAxB,YAAAA,YAAY,CAACyB,OAAb,CAAqB,OAArB,EAA8BH,QAAQ,CAACE,IAAT,CAAcA,IAA5C;AACAjB,YAAAA,OAAO,CAACW,MAAD,CAAP;AACA,WAJD;AAKA,SAPkB,CAAnB;AAQA,eAAOC,YAAP;AACA;;AACD,UAAIO,GAAG,GAAGR,MAAM,CAACQ,GAAjB;;AACA,UAAIA,GAAG,CAACC,OAAJ,CAAY,OAAZ,IAAuB,CAAC,CAA5B,EAA+B;AAC9B3B,QAAAA,YAAY,CAACyB,OAAb,CAAqB,OAArB,EAA8B,EAA9B;AACAP,QAAAA,MAAM,CAACP,OAAP,CAAeY,KAAf,GAAuB,EAAvB;AACA;;AACD,UAAIG,GAAG,CAACC,OAAJ,CAAY,MAAZ,IAAsB,CAAC,CAAvB,IAA4BD,GAAG,CAACC,OAAJ,CAAY,OAAZ,IAAuB,CAAvD,EAA0D;AACzDT,QAAAA,MAAM,CAACP,OAAP,CAAeY,KAAf,GAAuBvB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAvB;AACA;;AACD,aAAOiB,MAAP;AACA,KAtBD,EAsBG,UAASU,GAAT,EAAc;AAChB,aAAOtB,OAAO,CAACE,MAAR,CAAeoB,GAAf,CAAP;AACA,KAxBD;AAyBAnB,IAAAA,QAAQ,CAACM,YAAT,CAAsBO,QAAtB,CAA+BL,GAA/B,CAAmC,UAASY,GAAT,EAAc;AAChD;AACA,UAAIA,GAAG,CAACL,IAAJ,CAASM,IAAT,IAAiB,CAArB,EAAwB;AACvB;AACAhC,QAAAA,MAAM,CAACiC,IAAP,CAAY;AACXC,UAAAA,IAAI,EAAE;AADK,SAAZ;AAGA;;AACD,aAAOH,GAAP;AACA,KATD,EASG,UAASD,GAAT,EAAc;AAChB,aAAOA,GAAP;AACA,KAXD;AAYAnB,IAAAA,QAAQ,CAACJ,OAAD,CAAR,CACEgB,IADF,CACO,UAAAC,QAAQ,EAAI;AACjB;AACAf,MAAAA,OAAO,CAACe,QAAD,CAAP,CAFiB,CAEE;AACnB,KAJF,WAKQ,UAAAW,KAAK,EAAI;AACf;AACAzB,MAAAA,MAAM,CAACyB,KAAD,CAAN;AACA,KARF;AASA,GAzDM,CAAP;AA0DA;AACD,IAAMC,QAAQ,GAAG,yCAAjB,C,CACA;;AACA,IAAMC,QAAQ,GAAG,2CAAjB,C,CACA;;AACA,eAAe;AACd;;;AAGAC,EAAAA,aAJc,yBAIAC,KAJA,EAIO;AACpB,WAAOjC,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,qBADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPC,QAAAA,MAAM,EAAEtC,IADD;AAEPuC,QAAAA,QAAQ,EAAEtC,GAFH;AAGPkC,QAAAA,KAAK,EAAEA;AAHA;AAHI,KAAD,CAAZ;AASA,GAda;;AAed;;;AAGAK,EAAAA,SAlBc,uBAkBF;AACX,WAAOtC,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAE,sDADO;AAEZY,MAAAA,MAAM,EAAE,KAFI;AAGZC,MAAAA,MAAM,EAAE;AACPI,QAAAA,MAAM,EAAE,KADD;AAEPC,QAAAA,SAAS,EAAE;AAFJ;AAHI,KAAD,CAAZ;AAQA,GA3Ba;;AA4Bd;;;AAGAC,EAAAA,OA/Bc,mBA+BNR,KA/BM,EA+BC;AACd,WAAOjC,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,yBADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPC,QAAAA,MAAM,EAAEtC,IADD;AAEPuC,QAAAA,QAAQ,EAAEtC,GAFH;AAGPkC,QAAAA,KAAK,EAAEA;AAHA;AAHI,KAAD,CAAZ;AASA,GAzCa;;AA0Cd;;;AAGAS,EAAAA,cA7Cc,0BA6CCC,KA7CD,EA6CQ;AACrB,WAAO3C,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,gBADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPC,QAAAA,MAAM,EAAEtC,IADD;AAEPuC,QAAAA,QAAQ,EAAEtC,GAFH;AAGP6C,QAAAA,WAAW,EAAED,KAHN;AAIPE,QAAAA,MAAM,EAAE,CAJD;AAKPC,QAAAA,QAAQ,EAAE;AALH;AAHI,KAAD,CAAZ;AAWA,GAzDa;;AA0Dd;;;AAGAC,EAAAA,aA7Dc,2BA6DE;AACf,WAAO/C,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,wBADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPa,QAAAA,SAAS,EAAE,EADJ;AAEPH,QAAAA,MAAM,EAAE,CAFD;AAGPC,QAAAA,QAAQ,EAAE;AAHH;AAHI,KAAD,CAAZ;AASA,GAvEa;;AAwEd;;;AAGAG,EAAAA,cA3Ec,4BA2EG;AAChB,WAAOjD,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,qBADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPa,QAAAA,SAAS,EAAE,EADJ;AAEPH,QAAAA,MAAM,EAAE,CAFD;AAGPC,QAAAA,QAAQ,EAAE;AAHH;AAHI,KAAD,CAAZ;AASA,GArFa;;AAsFd;;;AAGAI,EAAAA,cAzFc,0BAyFCxB,IAzFD,EAyFO;AACpB,WAAO1B,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,0BADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPgB,QAAAA,cAAc,EAAEzB,IADT;AAEPU,QAAAA,MAAM,EAAEtC,IAFD;AAGPkD,QAAAA,SAAS,EAAE,EAHJ;AAIPI,QAAAA,KAAK,EAAE;AAJA;AAHI,KAAD,CAAZ;AAUA,GApGa;;AAqGd;;;AAGAC,EAAAA,WAxGc,yBAwGA;AACb,WAAOrD,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,iBADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPC,QAAAA,MAAM,EAAEtC,IADD;AAEPkD,QAAAA,SAAS,EAAE;AAFJ;AAHI,KAAD,CAAZ;AAQA,GAjHa;;AAkHd;;;AAGAM,EAAAA,WArHc,yBAqHA;AACb,WAAOtD,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,oBADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPa,QAAAA,SAAS,EAAE,EADJ;AAEPH,QAAAA,MAAM,EAAE,CAFD;AAGPC,QAAAA,QAAQ,EAAE;AAHH;AAHI,KAAD,CAAZ;AASA,GA/Ha;;AAgId;;;AAGAS,EAAAA,YAnIc,0BAmIC;AACd,WAAOvD,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,sBADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPa,QAAAA,SAAS,EAAE,EADJ;AAEPH,QAAAA,MAAM,EAAE,CAFD;AAGPC,QAAAA,QAAQ,EAAE;AAHH;AAHI,KAAD,CAAZ;AASA,GA7Ia;;AA8Id;;;AAGAU,EAAAA,YAjJc,wBAiJDvB,KAjJC,EAiJM;AACnB,WAAOjC,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,sBADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPC,QAAAA,MAAM,EAAEtC,IADD;AAEPuC,QAAAA,QAAQ,EAAEtC,GAFH;AAGPkC,QAAAA,KAAK,EAAEA;AAHA;AAHI,KAAD,CAAZ;AASA,GA3Ja;;AA4Jd;;;AAGAwB,EAAAA,YA/Jc,0BA+JC;AACd,WAAOzD,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,0BADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPC,QAAAA,MAAM,EAAEtC,IADD;AAEPuC,QAAAA,QAAQ,EAAEtC,GAFH;AAGP6C,QAAAA,WAAW,EAAE;AAHN;AAHI,KAAD,CAAZ;AASA,GAzKa;;AA0Kd;;;AAGAc,EAAAA,SA7Kc,qBA6KJC,IA7KI,EA6KE;AACf,WAAO3D,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,kBADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPC,QAAAA,MAAM,EAAEtC,IADD;AAEPuC,QAAAA,QAAQ,EAAEtC,GAFH;AAGP6C,QAAAA,WAAW,EAAEe;AAHN;AAHI,KAAD,CAAZ;AASA,GAvLa;;AAwLd;;;AAGAC,EAAAA,aA3Lc,2BA2LE;AACf,WAAO5D,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,4BADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPC,QAAAA,MAAM,EAAEtC;AADD;AAHI,KAAD,CAAZ;AAOA,GAnMa;;AAoMd;;;AAGA+D,EAAAA,aAvMc,2BAuME;AACf,WAAO7D,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,oBADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPa,QAAAA,SAAS,EAAE,EADJ;AAEPH,QAAAA,MAAM,EAAE,CAFD;AAGPC,QAAAA,QAAQ,EAAE;AAHH;AAHI,KAAD,CAAZ;AASA,GAjNa;;AAkNd;;;AAGAgB,EAAAA,SArNc,uBAqNF;AACX,WAAO9D,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,cADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPE,QAAAA,QAAQ,EAAEtC,GADH;AAEPqC,QAAAA,MAAM,EAAEtC;AAFD;AAHI,KAAD,CAAZ;AAQA,GA9Na;;AA+Nd;;;AAGAiE,EAAAA,aAlOc,2BAkOE;AACf,WAAO/D,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,mBADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPE,QAAAA,QAAQ,EAAEtC,GADH;AAEPqC,QAAAA,MAAM,EAAEtC;AAFD;AAHI,KAAD,CAAZ;AAQA,GA3Oa;;AA4Od;;;AAGAkE,EAAAA,gBA/Oc,8BA+OK;AAClB,WAAOhE,KAAK,CAAC;AACZsB,MAAAA,GAAG,EAAES,QAAQ,GAAG,sBADJ;AAEZG,MAAAA,MAAM,EAAE,MAFI;AAGZC,MAAAA,MAAM,EAAE;AACPE,QAAAA,QAAQ,EAAEtC;AADH;AAHI,KAAD,CAAZ;AAOA;AAvPa,CAAf","sourcesContent":["import axios from \"axios\";\r\nimport qs from \"qs\";\r\nimport Router from '@/router/index';\r\nlet AUTH_TOKEN = (function() {\r\n\treturn localStorage.getItem(\"token\");\r\n})();\r\nlet USER = (function() {\r\n\treturn localStorage.getItem(\"user\");\r\n})();\r\nlet CID = (function() {\r\n\treturn 34;\r\n})();\r\nexport function fetch(options) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst instance = axios.create({\r\n\t\t\t//instance创建一个axios实例，可以自定义配置，可在 axios文档中查看详情\r\n\t\t\t//所有的请求都会带上这些配置，比如全局都要用的身份信息等。\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t// 'token':\"eyJ0eXBlIjoiSldUIiwiYWxnIjoiSFMyNTYifQ.eyJleHAiOjE1ODc0OTA5NTcsIm5iZiI6MTU4Mzg5MDk1N30.4uO3puLj52psZgbfTQgNPkeqzk_pn9-M2-eziyx1WhU\",//token从全局变量那里传过来\r\n\t\t\t},\r\n\t\t\ttimeout: 30 * 1000 // 30秒超时\r\n\t\t});\r\n\t\tinstance.defaults.headers.common[\"token\"] = AUTH_TOKEN;\r\n\t\tinstance.interceptors.request.use(function(config) {\r\n\t\t\t// console.log(\"AUTH_TOKEN\")\r\n\t\t\tif (AUTH_TOKEN == null) {\r\n\t\t\t\tlet promisefresh = new Promise(function(resolve, reject) {\r\n\t\t\t\t\t//刷新token\r\n\t\t\t\t\taxios.get(\"http://api.cloud.alilo.com.cn/api/v4/login/get-token?appKey=hht&appSecret=hht\").then(response => {\r\n\t\t\t\t\t\tconfig.headers.token = response.data.data;\r\n\t\t\t\t\t\tlocalStorage.setItem('token', response.data.data);\r\n\t\t\t\t\t\tresolve(config);\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\treturn promisefresh;\r\n\t\t\t}\r\n\t\t\tlet url = config.url;\r\n\t\t\tif (url.indexOf(\"login\") > -1) {\r\n\t\t\t\tlocalStorage.setItem('token', \"\");\r\n\t\t\t\tconfig.headers.token = \"\";\r\n\t\t\t}\r\n\t\t\tif (url.indexOf(\"user\") > -1 && url.indexOf(\"login\") < 0) {\r\n\t\t\t\tconfig.headers.token = localStorage.getItem(\"token\");\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\t\t}, function(err) {\r\n\t\t\treturn Promise.reject(err);\r\n\t\t});\r\n\t\tinstance.interceptors.response.use(function(res) {\r\n\t\t\t// console.log(res)\r\n\t\t\tif (res.data.code == 2) {\r\n\t\t\t\t// console.log(\"token过期了\", Router);\r\n\t\t\t\tRouter.push({\r\n\t\t\t\t\tname: 'login'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}, function(err) {\r\n\t\t\treturn err;\r\n\t\t});\r\n\t\tinstance(options)\r\n\t\t\t.then(response => {\r\n\t\t\t\t//then 请求成功之后进行什么操作\r\n\t\t\t\tresolve(response); //把请求到的数据发到引用请求的地方\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\t// console.log(\"请求异常信息：\" + error);\r\n\t\t\t\treject(error);\r\n\t\t\t});\r\n\t});\r\n}\r\nconst cloudUrl = \"https://cloud.alilo.com.cn/baby/api/wx/\";\r\n// const aliloUrl = \"http://api.tcloud.alilo.com.cn/api/v4/\";\r\nconst aliloUrl = \"http://hhtv3.api.zhishangsoft.com/api/v4/\"\r\n//banner轮播图\r\nexport default {\r\n\t/**\r\n\t * 获取学习报告\r\n\t */\r\n\tgetUserReport(month) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/study-report\",\r\n\t\t\tmethod: \"post\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER,\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tmonth: month\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 获取用户token\r\n\t * */\r\n\tuserLogin() {\r\n\t\treturn fetch({\r\n\t\t\turl: \"http://api.cloud.alilo.com.cn/api/v4/login/get-token\",\r\n\t\t\tmethod: \"get\",\r\n\t\t\tparams: {\r\n\t\t\t\tappKey: \"hht\",\r\n\t\t\t\tappSecret: \"hht\"\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/*\r\n\t *累计学习时长\r\n\t */\r\n\tsumTime(month) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/study-total-time\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER,\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tmonth: month\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 排行榜\r\n\t * */\r\n\tgetBabyRanking(mouth) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/get-top\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER,\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tcurrentDate: mouth,\r\n\t\t\t\tpageNo: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 会员专属内容\r\n\t * */\r\n\tgetVipContent() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"audio-group/search-vip\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tchannelId: 65,\r\n\t\t\t\tpageNo: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 会员专属活动\r\n\t * */\r\n\tgetVipActivity() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"vip-activity/search\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tchannelId: 65,\r\n\t\t\t\tpageNo: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 会员卡激活\r\n\t * */\r\n\tsetVipClubCard(code) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"activation-code/activate\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tactivationCode: code,\r\n\t\t\t\tuserId: USER,\r\n\t\t\t\tchannelId: 65,\r\n\t\t\t\tdevid: 111\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 会员用户信息\r\n\t * */\r\n\tgetUserInfo() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"member-card/get\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER,\r\n\t\t\t\tchannelId: 34\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 会员帮助\r\n\t * */\r\n\tgetUserHelp() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"member-help/search\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tchannelId: 65,\r\n\t\t\t\tpageNo: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 权益介绍\r\n\t */\r\n\tgetVipEquity() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"member-rights/search\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tchannelId: 65,\r\n\t\t\t\tpageNo: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 获取宝宝打卡信息\r\n\t * */\r\n\tgetBabyClock(month) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/punch-in-list\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER,\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tmonth: month\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/*\r\n\t * 每日课程\r\n\t * */\r\n\tgetDayCourse() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/today-course-data\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER,\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tcurrentDate: '2020-04-03'\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 课程关键字\r\n\t */\r\n\tgetDayKey(time) {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/today-key\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER,\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tcurrentDate: time\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * 宝宝关键期\r\n\t */\r\n\tgetBabyPeriod() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/get-critical-period\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tuserId: USER\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t/*\r\n\t * 查询会员卡\r\n\t */\r\n\tgetMemberCard() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"member-card/search\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tchannelId: 65,\r\n\t\t\t\tpageNo: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t}\r\n\t\t});\r\n\t},\n\t/*\n\t* 报名\n\t*/\r\n\tuserApply() {\r\n\t\treturn fetch({\r\n\t\t\turl: aliloUrl + \"course/apply\",\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tparams: {\r\n\t\t\t\tcourseId: CID,\r\n\t\t\t\tuserId: USER,\r\n\t\t\t}\r\n\t\t});\r\n\t},\n\t/*\n\t* 获取报名时间\n\t*/\n\tuserApplyTime() {\n\t\treturn fetch({\n\t\t\turl: aliloUrl + \"course/apply-time\",\n\t\t\tmethod: \"POST\",\n\t\t\tparams: {\n\t\t\t\tcourseId: CID,\n\t\t\t\tuserId: USER,\n\t\t\t}\n\t\t});\n\t},\n\t/*\n\t* 获取报名时间\n\t*/\n\tuserActivityInfo() {\n\t\treturn fetch({\n\t\t\turl: aliloUrl + \"course/get-introduce\",\n\t\t\tmethod: \"POST\",\n\t\t\tparams: {\n\t\t\t\tcourseId: CID,\n\t\t\t}\n\t\t});\n\t}\r\n};\n"]}]}